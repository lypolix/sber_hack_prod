{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'../App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState('');const[pass,setPass]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();async function handleSubmit(e){e.preventDefault();if(!email||!pass){setError('Please enter both email and password.');return;}setError('');setLoading(true);try{const response=await fetch('http://localhost:8080/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password:pass})});if(!response.ok){if(response.status===401){setError('Invalid credentials. Please try again.');}else{setError('Login failed. Please try again later.');}setLoading(false);return;}const data=await response.json();if(data.token){localStorage.setItem('jwtToken',data.token);// сохраняем токен\nsetLoading(false);navigate('/profile');// переходим в профиль\n}else{setError('Login failed: token not received.');setLoading(false);}}catch(err){setError('Network error. Please try again later.');setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"dark-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-dark\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"email\",placeholder:\"Enter your email\",value:email,onChange:e=>setEmail(e.target.value),disabled:loading,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",placeholder:\"Enter your password\",value:pass,onChange:e=>setPass(e.target.value),disabled:loading,required:true}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",role:\"alert\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",disabled:loading,children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",style:{marginTop:'1em',background:'#347cff',color:'#fff'},onClick:()=>navigate('/register'),disabled:loading,children:\"Go to Registration\"})]})});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","pass","setPass","error","setError","loading","setLoading","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","password","ok","status","data","json","token","localStorage","setItem","err","className","children","onSubmit","type","placeholder","value","onChange","target","disabled","required","role","style","marginTop","background","color","onClick"],"sources":["/home/Polina/sber_hack/sber_hack/front/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css';\n\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [pass, setPass] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    if (!email || !pass) {\n      setError('Please enter both email and password.');\n      return;\n    }\n    setError('');\n    setLoading(true);\n\n    try {\n      const response = await fetch('http://localhost:8080/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password: pass }),\n      });\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          setError('Invalid credentials. Please try again.');\n        } else {\n          setError('Login failed. Please try again later.');\n        }\n        setLoading(false);\n        return;\n      }\n\n      const data = await response.json();\n      if (data.token) {\n        localStorage.setItem('jwtToken', data.token); // сохраняем токен\n        setLoading(false);\n        navigate('/profile'); // переходим в профиль\n      } else {\n        setError('Login failed: token not received.');\n        setLoading(false);\n      }\n    } catch (err) {\n      setError('Network error. Please try again later.');\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"dark-bg\">\n      <div className=\"card card-dark\">\n        <h2>Login</h2>\n        <form onSubmit={handleSubmit}>\n          <label>Email</label>\n          <input\n            className=\"input\"\n            type=\"email\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            disabled={loading}\n            required\n          />\n          <label>Password</label>\n          <input\n            className=\"input\"\n            type=\"password\"\n            placeholder=\"Enter your password\"\n            value={pass}\n            onChange={e => setPass(e.target.value)}\n            disabled={loading}\n            required\n          />\n          {error && <div className=\"error\" role=\"alert\">{error}</div>}\n          <button className=\"button\" disabled={loading}>\n            {loading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        <button\n          className=\"button\"\n          style={{ marginTop: '1em', background: '#347cff', color: '#fff' }}\n          onClick={() => navigate('/register')}\n          disabled={loading}\n        >\n          Go to Registration\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}