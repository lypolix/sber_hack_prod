{"ast":null,"code":"import React,{useEffect,useState}from\"react\";// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatDate(dateStr){const date=new Date(dateStr);return date.toLocaleDateString(\"ru-RU\",{year:\"numeric\",month:\"long\",day:\"numeric\"});}export default function MyBookings(){const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const token=localStorage.getItem(\"jwtToken\");if(!token){setError(\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω\");setLoading(false);return;}fetch(\"http://83.166.247.88:8080/api/bookings\",{headers:{Authorization:\"Bearer \"+token}}).then(res=>{if(res.status===401)throw new Error(\"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\");if(!res.ok)throw new Error(\"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π\");return res.json();}).then(data=>{setBookings(data);setLoading(false);}).catch(err=>{setError(err.message);setLoading(false);});},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{color:\"#c9cee3\",textAlign:\"center\",marginTop:50},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0439...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",textAlign:\"center\",marginTop:50},children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:800,margin:\"0 auto\",padding:\"28px 20px 20px 20px\",background:\"rgba(32, 35, 54, 0.96)\",borderRadius:22,boxShadow:\"0 10px 40px #1c184a\",color:\"#f5f6fa\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\",marginBottom:26,letterSpacing:0.5,background:\"linear-gradient(95deg, #19dfa5, #40c6f6)\",WebkitBackgroundClip:\"text\",WebkitTextFillColor:\"transparent\"},children:\"\\u0412\\u0430\\u0448\\u0438 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"}),bookings.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",color:\"#c9cee3\",fontSize:20,padding:\"40px 0\"},children:[\"\\u0411\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u043C\\u0435\\u0441\\u0442 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"no bookings\",children:\"\\uD83E\\uDE91\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:22},children:bookings.map(b=>/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#232743\",borderRadius:14,boxShadow:\"0 2px 16px #0009\",display:\"flex\",alignItems:\"center\",padding:\"22px 26px\",gap:28,position:\"relative\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{minWidth:64,height:64,borderRadius:\"50%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",background:\"linear-gradient(95deg, #19dfa5a8 0%, #40c6f699 80%)\",color:\"#272743\",fontWeight:900,fontSize:28,boxShadow:\"0 4px 10px #222\"},children:b.place_name.replace(/[^0-9]/g,\"\")||/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF6A\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:22,fontWeight:600,color:\"#19dfa5\",marginBottom:4},children:[b.place_name,/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#fff\",marginLeft:15},children:[\"\\u041C\\u0435\\u0441\\u0442\\u043E: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#41bbae\"},children:b.seat_number})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:17,marginBottom:5,color:\"#bfcada\"},children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0414\\u0430\\u0442\\u0430: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:formatDate(b.start_time)})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:15,color:\"#5f87ad\"},children:[\"\\u0417\\u0430\\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043E: \",new Date(b.created_at).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:\"flex-start\",fontSize:32,color:\"#62e2c4\",marginLeft:8},children:\"\\uD83E\\uDE91\"})]},b.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","formatDate","dateStr","date","Date","toLocaleDateString","year","month","day","MyBookings","bookings","setBookings","loading","setLoading","error","setError","token","localStorage","getItem","fetch","headers","Authorization","then","res","status","Error","ok","json","data","catch","err","message","style","color","textAlign","marginTop","children","maxWidth","margin","padding","background","borderRadius","boxShadow","marginBottom","letterSpacing","WebkitBackgroundClip","WebkitTextFillColor","length","fontSize","role","display","flexDirection","gap","map","b","alignItems","position","minWidth","height","justifyContent","fontWeight","place_name","replace","flex","marginLeft","seat_number","start_time","created_at","toLocaleString","alignSelf","id"],"sources":["/home/Polina/sber_hack/sber_hack/front/src/components/Profile/MyBookings.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nfunction formatDate(dateStr) {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(\"ru-RU\", { year: \"numeric\", month: \"long\", day: \"numeric\" });\n}\n\nexport default function MyBookings() {\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwtToken\");\n    if (!token) {\n      setError(\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω\");\n      setLoading(false);\n      return;\n    }\n\n    fetch(\"http://83.166.247.88:8080/api/bookings\", {\n      headers: { Authorization: \"Bearer \" + token }\n    })\n      .then((res) => {\n        if (res.status === 401) throw new Error(\"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\");\n        if (!res.ok) throw new Error(\"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π\");\n        return res.json();\n      })\n      .then((data) => {\n        setBookings(data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setError(err.message);\n        setLoading(false);\n      });\n  }, []);\n\n  if (loading) {\n    return (\n      <div style={{ color: \"#c9cee3\", textAlign: \"center\", marginTop: 50 }}>\n        –ó–∞–≥—Ä—É–∑–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ color: \"red\", textAlign: \"center\", marginTop: 50 }}>\n        –û—à–∏–±–∫–∞: {error}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        maxWidth: 800,\n        margin: \"0 auto\",\n        padding: \"28px 20px 20px 20px\",\n        background: \"rgba(32, 35, 54, 0.96)\",\n        borderRadius: 22,\n        boxShadow: \"0 10px 40px #1c184a\",\n        color: \"#f5f6fa\",\n      }}\n    >\n      <h2\n        style={{\n          textAlign: \"center\",\n          marginBottom: 26,\n          letterSpacing: 0.5,\n          background: \"linear-gradient(95deg, #19dfa5, #40c6f6)\",\n          WebkitBackgroundClip: \"text\",\n          WebkitTextFillColor: \"transparent\",\n        }}\n      >\n        –í–∞—à–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è\n      </h2>\n\n      {bookings.length === 0 ? (\n        <div style={{ textAlign: \"center\", color: \"#c9cee3\", fontSize: 20, padding: \"40px 0\" }}>\n          –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Å—Ç –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.<br />\n          <span role=\"img\" aria-label=\"no bookings\">ü™ë</span>\n        </div>\n      ) : (\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 22 }}>\n          {bookings.map((b) => (\n            <div\n              key={b.id}\n              style={{\n                background: \"#232743\",\n                borderRadius: 14,\n                boxShadow: \"0 2px 16px #0009\",\n                display: \"flex\",\n                alignItems: \"center\",\n                padding: \"22px 26px\",\n                gap: 28,\n                position: \"relative\",\n              }}\n            >\n              <div\n                style={{\n                  minWidth: 64,\n                  height: 64,\n                  borderRadius: \"50%\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  background: \"linear-gradient(95deg, #19dfa5a8 0%, #40c6f699 80%)\",\n                  color: \"#272743\",\n                  fontWeight: 900,\n                  fontSize: 28,\n                  boxShadow: \"0 4px 10px #222\",\n                }}\n              >\n                {b.place_name.replace(/[^0-9]/g, \"\") || <span>üç™</span>}\n              </div>\n              <div style={{ flex: 1 }}>\n                <div style={{ fontSize: 22, fontWeight: 600, color: \"#19dfa5\", marginBottom: 4 }}>\n                  {b.place_name}\n                  <span style={{ color: \"#fff\", marginLeft: 15 }}>\n                    –ú–µ—Å—Ç–æ: <b style={{ color: \"#41bbae\" }}>{b.seat_number}</b>\n                  </span>\n                </div>\n                <div style={{ fontSize: 17, marginBottom: 5, color: \"#bfcada\" }}>\n                  <span>\n                    –î–∞—Ç–∞: <b style={{ color: \"#fff\" }}>{formatDate(b.start_time)}</b>\n                  </span>\n                  {/* –£–±—Ä–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */}\n                </div>\n                <div style={{ fontSize: 15, color: \"#5f87ad\" }}>\n                  –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ: {new Date(b.created_at).toLocaleString()}\n                </div>\n              </div>\n              <div style={{ alignSelf: \"flex-start\", fontSize: 32, color: \"#62e2c4\", marginLeft: 8 }}>\n                ü™ë\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,QAAS,CAAAC,UAAUA,CAACC,OAAO,CAAE,CAC3B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,OAAO,CAAC,CAC9B,MAAO,CAAAC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,MAAM,CAAEC,GAAG,CAAE,SAAU,CAAC,CAAC,CAC7F,CAEA,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAExCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC9C,GAAI,CAACF,KAAK,CAAE,CACVD,QAAQ,CAAC,6BAA6B,CAAC,CACvCF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEAM,KAAK,CAAC,wCAAwC,CAAE,CAC9CC,OAAO,CAAE,CAAEC,aAAa,CAAE,SAAS,CAAGL,KAAM,CAC9C,CAAC,CAAC,CACCM,IAAI,CAAEC,GAAG,EAAK,CACb,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuB,CAAC,CAChE,GAAI,CAACF,GAAG,CAACG,EAAE,CAAE,KAAM,IAAI,CAAAD,KAAK,CAAC,8BAA8B,CAAC,CAC5D,MAAO,CAAAF,GAAG,CAACI,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDL,IAAI,CAAEM,IAAI,EAAK,CACdjB,WAAW,CAACiB,IAAI,CAAC,CACjBf,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDgB,KAAK,CAAEC,GAAG,EAAK,CACdf,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,CACrBlB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,GAAID,OAAO,CAAE,CACX,mBACEd,IAAA,QAAKkC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEC,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,EAAG,CAAE,CAAAC,QAAA,CAAC,8HAEtE,CAAK,CAAC,CAEV,CAEA,GAAItB,KAAK,CAAE,CACT,mBACEd,KAAA,QAAKgC,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAK,CAAEC,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,EAAG,CAAE,CAAAC,QAAA,EAAC,wCACxD,CAACtB,KAAK,EACX,CAAC,CAEV,CAEA,mBACEd,KAAA,QACEgC,KAAK,CAAE,CACLK,QAAQ,CAAE,GAAG,CACbC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,qBAAqB,CAC9BC,UAAU,CAAE,wBAAwB,CACpCC,YAAY,CAAE,EAAE,CAChBC,SAAS,CAAE,qBAAqB,CAChCT,KAAK,CAAE,SACT,CAAE,CAAAG,QAAA,eAEFtC,IAAA,OACEkC,KAAK,CAAE,CACLE,SAAS,CAAE,QAAQ,CACnBS,YAAY,CAAE,EAAE,CAChBC,aAAa,CAAE,GAAG,CAClBJ,UAAU,CAAE,0CAA0C,CACtDK,oBAAoB,CAAE,MAAM,CAC5BC,mBAAmB,CAAE,aACvB,CAAE,CAAAV,QAAA,CACH,mGAED,CAAI,CAAC,CAEJ1B,QAAQ,CAACqC,MAAM,GAAK,CAAC,cACpB/C,KAAA,QAAKgC,KAAK,CAAE,CAAEE,SAAS,CAAE,QAAQ,CAAED,KAAK,CAAE,SAAS,CAAEe,QAAQ,CAAE,EAAE,CAAET,OAAO,CAAE,QAAS,CAAE,CAAAH,QAAA,EAAC,qLACpD,cAAAtC,IAAA,QAAK,CAAC,cACxCA,IAAA,SAAMmD,IAAI,CAAC,KAAK,CAAC,aAAW,aAAa,CAAAb,QAAA,CAAC,cAAE,CAAM,CAAC,EAChD,CAAC,cAENtC,IAAA,QAAKkC,KAAK,CAAE,CAAEkB,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAQ,CAAEC,GAAG,CAAE,EAAG,CAAE,CAAAhB,QAAA,CAC/D1B,QAAQ,CAAC2C,GAAG,CAAEC,CAAC,eACdtD,KAAA,QAEEgC,KAAK,CAAE,CACLQ,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,EAAE,CAChBC,SAAS,CAAE,kBAAkB,CAC7BQ,OAAO,CAAE,MAAM,CACfK,UAAU,CAAE,QAAQ,CACpBhB,OAAO,CAAE,WAAW,CACpBa,GAAG,CAAE,EAAE,CACPI,QAAQ,CAAE,UACZ,CAAE,CAAApB,QAAA,eAEFtC,IAAA,QACEkC,KAAK,CAAE,CACLyB,QAAQ,CAAE,EAAE,CACZC,MAAM,CAAE,EAAE,CACVjB,YAAY,CAAE,KAAK,CACnBS,OAAO,CAAE,MAAM,CACfK,UAAU,CAAE,QAAQ,CACpBI,cAAc,CAAE,QAAQ,CACxBnB,UAAU,CAAE,qDAAqD,CACjEP,KAAK,CAAE,SAAS,CAChB2B,UAAU,CAAE,GAAG,CACfZ,QAAQ,CAAE,EAAE,CACZN,SAAS,CAAE,iBACb,CAAE,CAAAN,QAAA,CAEDkB,CAAC,CAACO,UAAU,CAACC,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,eAAIhE,IAAA,SAAAsC,QAAA,CAAM,cAAE,CAAM,CAAC,CACpD,CAAC,cACNpC,KAAA,QAAKgC,KAAK,CAAE,CAAE+B,IAAI,CAAE,CAAE,CAAE,CAAA3B,QAAA,eACtBpC,KAAA,QAAKgC,KAAK,CAAE,CAAEgB,QAAQ,CAAE,EAAE,CAAEY,UAAU,CAAE,GAAG,CAAE3B,KAAK,CAAE,SAAS,CAAEU,YAAY,CAAE,CAAE,CAAE,CAAAP,QAAA,EAC9EkB,CAAC,CAACO,UAAU,cACb7D,KAAA,SAAMgC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAE+B,UAAU,CAAE,EAAG,CAAE,CAAA5B,QAAA,EAAC,kCACvC,cAAAtC,IAAA,MAAGkC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAG,QAAA,CAAEkB,CAAC,CAACW,WAAW,CAAI,CAAC,EACtD,CAAC,EACJ,CAAC,cACNnE,IAAA,QAAKkC,KAAK,CAAE,CAAEgB,QAAQ,CAAE,EAAE,CAAEL,YAAY,CAAE,CAAC,CAAEV,KAAK,CAAE,SAAU,CAAE,CAAAG,QAAA,cAC9DpC,KAAA,SAAAoC,QAAA,EAAM,4BACE,cAAAtC,IAAA,MAAGkC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAG,QAAA,CAAEnC,UAAU,CAACqD,CAAC,CAACY,UAAU,CAAC,CAAI,CAAC,EAC7D,CAAC,CAEJ,CAAC,cACNlE,KAAA,QAAKgC,KAAK,CAAE,CAAEgB,QAAQ,CAAE,EAAE,CAAEf,KAAK,CAAE,SAAU,CAAE,CAAAG,QAAA,EAAC,kFAC/B,CAAC,GAAI,CAAAhC,IAAI,CAACkD,CAAC,CAACa,UAAU,CAAC,CAACC,cAAc,CAAC,CAAC,EACpD,CAAC,EACH,CAAC,cACNtE,IAAA,QAAKkC,KAAK,CAAE,CAAEqC,SAAS,CAAE,YAAY,CAAErB,QAAQ,CAAE,EAAE,CAAEf,KAAK,CAAE,SAAS,CAAE+B,UAAU,CAAE,CAAE,CAAE,CAAA5B,QAAA,CAAC,cAExF,CAAK,CAAC,GAhDDkB,CAAC,CAACgB,EAiDJ,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}